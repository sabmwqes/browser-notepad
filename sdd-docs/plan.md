# Browser Notepad - 実装計画書

## 1. プロジェクト概要

ブラウザ上で動作するシンプルなテキストエディタアプリケーション。ユーザーはメモの作成、編集、保存が可能で、ローカルストレージにデータを保存します。

### ターゲットユーザー
- 簡易的なメモを素早く取りたいユーザー
- ブラウザベースのテキストエディタを求めるユーザー
- インストール不要で使えるメモアプリを必要とするユーザー

---

## 2. 機能要件

### 2.1 必須機能（MVP）

1. **テキスト入力・編集**
   - プレーンテキストの入力
   - 基本的な編集機能（コピー、ペースト、カット）

2. **データ保存**
   - 自動保存機能
   - ブラウザのローカルストレージへの永続化

3. **基本UI**
   - テキストエリア
   - シンプルで直感的なインターフェース

### 2.2 拡張機能（オプション）

以下は実装の選択肢があります：

1. **複数メモ管理**
   - 選択肢A: 単一メモのみ（シンプル）
   - 選択肢B: 複数メモをタブで管理
   - 選択肢C: メモリスト + 詳細ビュー形式

2. **メモの編集機能**
   - 選択肢A: プレーンテキストのみ
   - 選択肢B: Markdownサポート + プレビュー機能
   - 選択肢C: リッチテキストエディタ

3. **検索機能**
   - メモ内のテキスト検索
   - メモ名での検索（複数メモの場合）

4. **エクスポート/インポート**
   - メモのダウンロード（.txt, .md）
   - メモのインポート
   - データのバックアップ/復元（JSON形式）

5. **カスタマイゼーション**
   - テーマ切り替え（ライト/ダーク）
   - フォントサイズ調整
   - エディタ設定（行番号表示など）

6. **その他の機能**
   - 文字数カウンター
   - タイムスタンプ（作成日時、更新日時）
   - タグ機能
   - お気に入り機能

---

## 3. 技術スタック

### 確定事項
- **フレームワーク**: React 19.2.0
- **ビルドツール**: Vite 7.3.1
- **言語**: TypeScript
- **スタイリング**: CSS（または後で選択）

### 選択肢のある技術決定

#### 3.1 状態管理
- 選択肢A: React の useState/useContext（小規模アプリに適している）
- 選択肢B: Zustand（軽量で使いやすい）
- 選択肢C: Redux Toolkit（大規模化を見据える場合）

**推奨**: 選択肢A（シンプルな要件のため）

#### 3.2 スタイリング
- 選択肢A: Pure CSS / CSS Modules
- 選択肢B: Tailwind CSS（ユーティリティファースト）
- 選択肢C: Styled Components / Emotion（CSS-in-JS）
- 選択肢D: MUI / Chakra UI（UIコンポーネントライブラリ）

**推奨**: 選択肢A または B（シンプルさと拡張性のバランス）

#### 3.3 データ保存
- 選択肢A: localStorage（シンプル、5-10MBの制限）
- 選択肢B: IndexedDB（大容量データに対応）
- 選択肢C: オンライン同期（Firebase, Supabase など）

**推奨**: 選択肢A（MVPには十分、必要に応じてBへ移行可能）

#### 3.4 エディタコンポーネント
- 選択肢A: HTML textarea（最もシンプル）
- 選択肢B: CodeMirror / Monaco Editor（高機能エディタ）
- 選択肢C: React Simple Code Editor（軽量）
- 選択肢D: Lexical / Slate（リッチテキスト向け）

**推奨**: 選択肢A（MVPには十分、機能追加時にBへ移行可能）

---

## 4. データモデル

### 単一メモモデル（シンプル版）
```typescript
interface Note {
  content: string;
  updatedAt: string;
}
```

### 複数メモモデル（拡張版）
```typescript
interface Note {
  id: string;
  title: string;
  content: string;
  createdAt: string;
  updatedAt: string;
  tags?: string[];
  isFavorite?: boolean;
}

interface NotesState {
  notes: Note[];
  activeNoteId: string | null;
}
```

---

## 5. UI/UX設計

### 5.1 レイアウト

#### シンプル版（単一メモ）
```
+----------------------------------+
|  Browser Notepad         [保存]  |
+----------------------------------+
|                                  |
|  テキストエリア                    |
|                                  |
|                                  |
|                                  |
+----------------------------------+
|  文字数: 123 | 最終更新: 2026/2/11 |
+----------------------------------+
```

#### 拡張版（複数メモ）
```
+----------------------------------+
|  Browser Notepad     [新規][設定] |
+----------------------------------+
| メモリスト |  メモ内容              |
|-----------|---------------------|
| メモ1    |  タイトル: メモ1       |
| メモ2    |  [編集] [削除] [★]    |
| メモ3    |---------------------|
|          |  テキストエリア        |
|          |                     |
+----------------------------------+
```

### 5.2 必要なコンポーネント

#### MVP（最小構成）
1. `App.tsx` - メインコンポーネント
2. `Editor.tsx` - テキストエディタ
3. `StatusBar.tsx` - ステータス表示
4. `useLocalStorage.ts` - ローカルストレージフック

#### 拡張版
5. `NoteList.tsx` - メモ一覧
6. `NoteItem.tsx` - メモアイテム
7. `Header.tsx` - ヘッダー
8. `SettingsPanel.tsx` - 設定パネル
9. `SearchBar.tsx` - 検索バー

---

## 6. 実装フェーズ

### フェーズ1: MVP実装（1-2日）
1. プロジェクトセットアップ（完了）
2. 基本的なエディタコンポーネント作成
3. ローカルストレージへの保存・読み込み
4. 自動保存機能の実装
5. 基本的なスタイリング

**成果物**: 単一メモの作成・編集・保存が可能な基本アプリ

### フェーズ2: UI/UX改善（1-2日）
1. レスポンシブデザイン対応
2. ダークモード実装
3. ステータスバー（文字数、更新日時）
4. エラーハンドリングとユーザーフィードバック

**成果物**: 使いやすいUIを持つアプリ

### フェーズ3: 機能拡張（選択項目、2-3日）
1. 複数メモ管理機能
2. 検索機能
3. エクスポート/インポート機能
4. タグ機能
5. お気に入り機能

**成果物**: 高機能なメモアプリ

### フェーズ4: 最適化とテスト（1-2日）
1. パフォーマンス最適化
2. ユニットテスト作成
3. E2Eテスト（オプション）
4. ブラウザ互換性テスト
5. アクセシビリティ対応

---

## 7. テスト戦略

### 7.1 ユニットテスト
- カスタムフック（useLocalStorage）のテスト
- ユーティリティ関数のテスト
- コンポーネントのロジックテスト

### 7.2 統合テスト
- ローカルストレージとの連携テスト
- コンポーネント間の相互作用テスト

### 7.3 E2Eテスト（オプション）
- ユーザーフローのテスト
- ブラウザでの動作確認

### テストツール候補
- **選択肢A**: Vitest + React Testing Library（推奨）
- **選択肢B**: Jest + React Testing Library
- **選択肢C**: Playwright（E2Eテスト向け）

---

## 8. デプロイ

### デプロイ先の選択肢
- **選択肢A**: GitHub Pages（静的サイト、無料）
- **選択肢B**: Vercel（簡単デプロイ、無料枠あり）
- **選択肢C**: Netlify（高機能、無料枠あり）
- **選択肢D**: Cloudflare Pages（高速、無料枠あり）

**推奨**: 選択肢A（package.jsonにgh-pagesが既に含まれている）

---

## 9. 検討事項と制約

### 制約事項
1. **ストレージ容量**: localStorageは5-10MB程度の制限
2. **ブラウザ依存**: ブラウザのローカルストレージを使用するため、デバイス間の同期は不可
3. **データ保護**: ユーザーがブラウザデータを削除すると、メモも削除される

### リスク管理
1. **データ損失**:
   - エクスポート機能の提供
   - 定期的なバックアップの推奨
2. **容量超過**:
   - ストレージ使用量の監視
   - 警告表示の実装

---

## 10. 今後の拡張可能性

### 将来的な機能候補
1. **クラウド同期**: Firebase, Supabase等との統合
2. **コラボレーション**: 複数ユーザーでのメモ共有
3. **プラグインシステム**: カスタム機能の追加
4. **AIアシスタント**: テキスト要約、文法チェック
5. **オフライン対応**: Service Workerによる完全オフライン機能
6. **モバイルアプリ**: PWA化、ネイティブアプリ化

---

## 11. 開発ワークフロー

### 推奨される開発手順
1. MVPの実装に集中し、早期に動作するプロトタイプを作成
2. ユーザビリティテストを実施し、フィードバックを収集
3. 優先度の高い機能から段階的に追加
4. 各フェーズでテストを実施
5. ドキュメントの継続的な更新

### ブランチ戦略
- `main`: 本番環境用
- `develop`: 開発用
- `feature/*`: 機能追加用

---

## 12. 決定が必要な項目まとめ

以下の項目について、実装前に決定する必要があります：

### 機能面
- [ ] 単一メモ vs 複数メモ管理
- [ ] プレーンテキスト vs Markdown対応
- [ ] 検索機能の有無
- [ ] エクスポート/インポート機能の有無
- [ ] タグ機能の有無

### 技術面
- [ ] スタイリング方法（CSS / Tailwind / Styled Components 等）
- [ ] 状態管理方法（useState / Zustand / Redux 等）
- [ ] エディタコンポーネント（textarea / CodeMirror 等）
- [ ] テストフレームワーク（Vitest / Jest 等）

### MVP推奨構成
最もシンプルで実装しやすい構成：
- **機能**: 単一メモ、プレーンテキスト、自動保存
- **技術**: Pure CSS、useState、textarea、localStorage
- **テスト**: Vitest + React Testing Library

この構成から始めて、必要に応じて段階的に機能を追加することを推奨します。

---

**作成日**: 2026年2月11日
**最終更新**: 2026年2月11日
